<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Mappa Cantine e Distillerie - Valle di Cembra</title>
  <link rel="stylesheet" href="https://unpkg.com/leaflet@1.9.4/dist/leaflet.css" crossorigin=""/>
  <script src="https://unpkg.com/leaflet@1.9.4/dist/leaflet.js" crossorigin=""></script>
  <script src="https://unpkg.com/leaflet.markercluster@1.5.3/dist/leaflet.markercluster.js"></script>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.css"/>
  <link rel="stylesheet" href="https://unpkg.com/leaflet.markercluster@1.5.3/dist/MarkerCluster.Default.css"/>
  <style>
    #map { height: 90vh; width: 100%; }
    .credits { text-align:center; margin-top:8px; color:#555; font-size:14px; }
  </style>
</head>
<body>
  <div style="margin:12px 0 6px; text-align:center;">
    <p style="color:#333;margin:0;font-size:15px;">
      Clicca sui segnaposto per scoprire ogni cantina e distilleria della Valle di Cembra.
    </p>
  </div>

  <div id="map"></div>

  <div class="credits">
    Mappa realizzata con ❤️ da Cantina Barone a Prato (dal 1539)
  </div>

  <script>
    const map = L.map('map').setView([46.175, 11.22], 12);
    L.tileLayer('https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png', {
      maxZoom: 19,
      attribution: '&copy; OpenStreetMap contributors'
    }).addTo(map);

    const iconUrl = "https://www.baroneaprato.com/wp-content/uploads/2025/09/logo-cantine-val-di-cembra.png";
    const wineIcon = L.icon({
      iconUrl: iconUrl,
      iconSize: [40, 40],
      iconAnchor: [20, 40],
      popupAnchor: [0, -35],
      shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'
    });
    const baroneIcon = L.icon({
      iconUrl: iconUrl,
      iconSize: [48, 48],
      iconAnchor: [24, 48],
      popupAnchor: [0, -40],
      shadowUrl:'https://unpkg.com/leaflet@1.9.4/dist/images/marker-shadow.png'
    });

    const btn = (label, href, primary=false) =>
      `<a href="${href}" target="_blank" rel="noopener"
        style="display:inline-block;margin:6px 6px 0 0;padding:8px 12px;border-radius:8px;
        border:1px solid ${primary?'#111':'#ddd'};background:${primary?'#111':'#fff'};
        color:${primary?'#fff':'#111'};text-decoration:none;font-weight:600;font-size:13px">
        ${label}</a>`;

    const popupHtml = (w) => {
      const links = [];
      if (w.url)   links.push(btn('Apri sito', w.url));
      if (w.maps)  links.push(btn('Apri indicazioni', w.maps, true));
      if (w.tel)   links.push(btn('Chiama', 'tel:'+(w.tel||'').replace(/\s+/g,'')));
      if (w.email) links.push(btn('Email', 'mailto:'+w.email));
      return `${w.name}<br/><small>${w.town}</small><div style="margin-top:6px">${links.join('')}</div>`;
    };

    // ELENCO COMPLETO
    const WINERIES = [
      { type:'cantina', name:'Cantina Barone a Prato dal 1539', town:'Segonzano (Piazzo)', url:'https://www.baroneaprato.com/', email:'paolo@baroneaprato.com', tel:'+393477593662', lat:46.182920265226, lng:11.251048352853, maps:'https://www.google.com/maps/dir/?api=1&destination=46.182920265226,11.251048352853&travelmode=driving' },
      { type:'cantina', name:'Cantina Béghel', town:'Segonzano (Sevignano)', url:'https://www.cantinabeghel.it/', tel:'+393450695084', lat:46.172796, lng:11.251493, maps:'https://www.google.com/maps/dir/?api=1&destination=46.172796,11.251493&travelmode=driving' },
      { type:'distilleria', name:'Distilleria Giacomozzi', town:'Segonzano', tel:'+390461686100', lat:46.186773100444, lng:11.260688466145, maps:'https://www.google.com/maps/dir/?api=1&destination=46.186773100444,11.260688466145&travelmode=driving' },
      { type:'distilleria', name:'Distilleria Pilzer', town:'Altavalle (Faver)', url:'http://www.pilzer.it/', tel:'+390461683326', lat:46.197641952539, lng:11.246419787697, maps:'https://www.google.com/maps/dir/?api=1&destination=46.197641952539,11.246419787697&travelmode=driving' },
      { type:'cantina', name:'Pietra di Confine (Fratelli Paolazzi)', town:'Altavalle (Faver)', email:'federicopaolazzi80@gmail.com', tel:'+393402473228', lat:46.1835637, lng:11.2405526, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1835637,11.2405526&travelmode=driving' },
      { type:'distilleria', name:'Paolazzi Vittorio – Distilleria', town:'Altavalle (Faver)', url:'https://www.grappapaolazzi.com/', tel:'+393476805616', lat:46.1844779, lng:11.2420793, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1844779,11.2420793&travelmode=driving' },
      { type:'cantina', name:'Corvée', town:'Cembra Lisignago', url:'https://www.corvee.wine/', tel:'+393499885827', lat:46.16892747275, lng:11.210182216302, maps:'https://www.google.com/maps/dir/?api=1&destination=46.16892747275,11.210182216302&travelmode=driving' },
      { type:'cantina', name:'Alfio Nicolodi', town:'Cembra Lisignago', tel:'+393512829953', lat:46.1771797, lng:11.2240382, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1771797,11.2240382&travelmode=driving' },
      { type:'cantina', name:'Cantina Pelz', town:'Cembra Lisignago', url:'https://www.instagram.com/cantina_pelz/', tel:'+393485900192', lat:46.169284115869, lng:11.217799689905, maps:'https://www.google.com/maps/dir/?api=1&destination=46.169284115869,11.217799689905&travelmode=driving' },
      { type:'cantina', name:'Cembra Cantina di Montagna', town:'Cembra Lisignago', url:'http://www.cembracantinadimontagna.it/', email:'info@cembracantinadimontagna.com', tel:'+390461680010', lat:46.1755432, lng:11.2233049, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1755432,11.2233049&travelmode=driving' },
      { type:'cantina', name:'Tenuta Gottardi', town:'Cembra Lisignago', url:'http://www.tenutagottardi.it/', tel:'+393463285606', lat:46.176919685286, lng:11.223373012164, maps:'https://www.google.com/maps/dir/?api=1&destination=46.176919685286,11.223373012164&travelmode=driving' },
      { type:'cantina', name:'Cantina Toniolli', town:'Cembra Lisignago', url:'http://www.cantinatoniolli.com/', email:'info@cantinatoniolli.com', tel:'+393486950258', lat:46.170340786963, lng:11.219238514542, maps:'https://www.google.com/maps/dir/?api=1&destination=46.170340786963,11.219238514542&travelmode=driving' },
      { type:'cantina', name:'Zanotelli', town:'Cembra Lisignago', url:'https://www.zanotelliwines.com/', tel:'+393491773844', lat:46.1747996, lng:11.2212154, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1747996,11.2212154&travelmode=driving' },
      { type:'cantina', name:'Cantina Simoni', town:'Giovo (Palù)', url:'https://www.cantinasimoni.it/', email:'info@cantinasimoni.it', tel:'+393490504864', lat:46.1582951, lng:11.1405473, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1582951,11.1405473&travelmode=driving' },
      { type:'cantina', name:'Maso Belvedere', town:'Giovo (Verla)', url:'https://masobelvedere.it/', email:'info@masobelvedere.it', tel:'+393392528710', lat:46.163235, lng:11.165742, maps:'https://www.google.com/maps/dir/?api=1&destination=46.163235,11.165742&travelmode=driving' },
      { type:'cantina', name:'Man Spumanti', town:'Altavalle (Faver)', url:'https://www.manspumanti.it/', email:'info@manspumanti.it', tel:'+393489238968', lat:46.18439, lng:11.24719, maps:'https://www.google.com/maps/dir/?api=1&destination=46.18439,11.24719&travelmode=driving' },
      { type:'cantina', name:'Villa Corniole', town:'Giovo (Verla)', url:'https://www.villacorniole.com/', email:'info@villacorniole.com', tel:'+390461695067', lat:46.158721833482, lng:11.155152557672, maps:'https://www.google.com/maps/dir/?api=1&destination=46.158721833482,11.155152557672&travelmode=driving' },
      { type:'cantina', name:'Cantina Micheli', town:'Lona-Lases', url:'http://www.cantinamicheli.it/', tel:'+393484433199', lat:46.1583452, lng:11.2317809, maps:'https://www.google.com/maps/dir/?api=1&destination=46.1583452,11.2317809&travelmode=driving' },
      { type:'cantina', name:'Pojer e Sandri', town:"Faedo (San Michele all'Adige)", url:"https://www.pojeresandri.com/", tel:"+390461650342", lat:46.198661, lng:11.133553, maps:"https://www.google.com/maps/dir/?api=1&destination=46.198661,11.133553&travelmode=driving" },
      { type:'cantina', name:'Tenute Novei (Cantina Novel)', town:'Cembra Lisignago', url:'https://www.tenutenovei.it/', tel:'+393513157612', lat:46.176102, lng:11.220893, maps:'https://www.google.com/maps/dir/?api=1&destination=46.176102,11.220893&travelmode=driving' },
      { type:'cantina', name:'La Campirlota', town:'Altavalle Faver Setegola (vigneto)', url:'https://www.lacampirlota.it/', email:'info@lacampirlota.it', tel:'+393495805345', lat:46.183793, lng:11.245368, maps:'https://www.google.com/maps/dir/?api=1&destination=46.183793,11.245368&travelmode=driving' }
    ];

    const markers = L.markerClusterGroup();
    WINERIES.forEach(w => {
      if(w.lat && w.lng){
        const iconChoice = (w.name.includes('Barone a Prato') ? baroneIcon : wineIcon);
        const m = L.marker([w.lat, w.lng], {icon: iconChoice});
        m.bindPopup(popupHtml(w));
        markers.addLayer(m);
      }
    });
    map.addLayer(markers);
    if(markers.getLayers().length){
      map.fitBounds(markers.getBounds().pad(0.2));
    }
  </script>
</body>
</html>
